############################################################
# Makefile for the regression tests that are run on travis
############################################################
ROOT = ../../../..

test-documentation:
	(cd $(ROOT)/AixLib; ../bin/runUnitTests.py --validate-html-only)
	# (cd $(ROOT)/AixLib/Resources/Documentation/userGuide; make regressiontest)
	# (cd $(ROOT)/AixLib/Resources/src/fluid/heatpumps/calibration/doc; make regressiontest)

test-experiment-setup:
	(cd $(ROOT)/AixLib; ../bin/runUnitTests.py --validate-experiment-setup)

test-autogenerated-files:
	#echo ### Check for package.order to be up to date
	(cd  $(ROOT)/AixLib; \
	  python -c 'import buildingspy.development.refactor as r; \
	  r.write_package_order(".", recursive=True)'; \
	  git diff --exit-code . )

	#echo ### Check for UnitConversion package to be consistent with the script that generates it
	# (cd  $(ROOT); \
	#   python AixLib/Resources/src/Controls/OBC/UnitConversions/unit_converters.py; \
	#   git diff --exit-code AixLib)

test-dymola:
	(cd $(ROOT)/AixLib && python ../bin/runUnitTests.py --batch --single-package $(PACKAGE) --tool dymola)